<svg xmlns="http://www.w3.org/2000/svg" style="width:1194px;height:1160px;background:#fff" width="1194" height="1160" contentScriptType="application/ecmascript" contentStyleType="text/css" preserveAspectRatio="none" version="1.1" viewBox="0 0 1194 1160" zoomAndPan="magnify"><style>@import url(https://fonts.googleapis.com/css?family=Roboto|Roboto+Mono&amp;display=swap);.code,.text{font-size:14px}.text{font-family:&apos;Roboto&apos;,sans-serif}.code{font-family:&apos;Roboto Mono&apos;,monospace}.note,.process{stroke:#383838;stroke-width:1}.process{fill:#f8f8f8}.note{fill:#ebebeb}</style><defs><filter id="f1ripw5coh8idk" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><path d="M881.5,16 L881.5,25.2031 L861.5,29.2031 L881.5,33.2031 L881.5,42.4063 A0,0 0 0 0 881.5,42.4063 L1182.5,42.4063 A0,0 0 0 0 1182.5,42.4063 L1182.5,26 L1172.5,16 L881.5,16 A0,0 0 0 0 881.5,16" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M1172.5,16 L1172.5,26 L1182.5,26 L1172.5,16" class="note"/><text x="887.5" y="33.988" class="text" textLength="280">Project closing executed in a dispatch thread.</text><rect width="96" height="36.406" x="765.5" y="11" class="process" filter="url(#f1ripw5coh8idk)" rx="12.5" ry="12.5"/><text x="775.5" y="33.988" class="text" textLength="76">closeProject</text><rect width="197" height="52.895" x="715" y="67.406" class="process" filter="url(#f1ripw5coh8idk)"/><text x="785" y="90.394" class="text" textLength="57">canClose</text><text x="725" y="107.348" class="code" textLength="177">(ep=ProjectCloseHandler)</text><polygon fill="#F8F8F8" points="719 140.301 908 140.301 920 156.748 908 173.195 719 173.195 707 156.748 719 140.301" filter="url(#f1ripw5coh8idk)" style="stroke:#383838;stroke-width:1"/><text x="785" y="153.289" class="text" textLength="57">canClose</text><text x="731" y="170.242" class="code" textLength="177">(ep=ProjectCloseHandler)</text><text x="686" y="153.33" class="text" textLength="21">yes</text><text x="920" y="153.33" class="text" textLength="16">no</text><rect width="166" height="36.406" x="472.5" y="183.195" class="process" filter="url(#f1ripw5coh8idk)"/><text x="482.5" y="206.184" class="text" textLength="146">Stop Service Preloading</text><path d="M705,244.6836 L705,262.0898 L685,266.0898 L705,270.0898 L705,287.4961 A0,0 0 0 0 705,287.4961 L993,287.4961 A0,0 0 0 0 993,287.4961 L993,254.6836 L983,244.6836 L705,244.6836 A0,0 0 0 0 705,244.6836" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M983,244.6836 L983,254.6836 L993,254.6836 L983,244.6836" class="note"/><text x="711" y="262.672" class="text" textLength="196">In unit test mode in a light tests,</text><text x="711" y="279.078" class="text" textLength="267">light project is not closed and not disposed.</text><rect width="259" height="52.977" x="426" y="239.602" class="process" filter="url(#f1ripw5coh8idk)"/><text x="436" y="262.672" class="text" textLength="23">Fire</text><text x="462" y="263.137" class="code" textLength="175">projectClosingBeforeSave</text><text x="640" y="262.672" class="text" textLength="35">Event</text><text x="462.5" y="279.625" class="code" textLength="186">(l=ProjectManagerListener)</text><rect width="128" height="36.406" x="491.5" y="312.578" class="process" filter="url(#f1ripw5coh8idk)"/><text x="501.5" y="335.566" class="text" textLength="108">Save Project Files</text><polygon fill="#F8F8F8" points="490 368.984 621 368.984 633 380.984 621 392.984 490 392.984 478 380.984 490 368.984" filter="url(#f1ripw5coh8idk)" style="stroke:#383838;stroke-width:1"/><text x="490" y="385.769" class="text" textLength="131">Save Project Settings</text><text x="300" y="377.566" class="text" textLength="178">Successfully or Error Ignored</text><text x="633" y="377.566" class="text" textLength="91">Error Occurred</text><rect width="206" height="52.977" x="106.5" y="402.984" class="process" filter="url(#f1ripw5coh8idk)"/><text x="127.5" y="426.055" class="text" textLength="23">Fire</text><text x="153.5" y="426.519" class="code" textLength="100">projectClosing</text><text x="256.5" y="426.055" class="text" textLength="35">Event</text><text x="116.5" y="443.008" class="code" textLength="186">(l=ProjectManagerListener)</text><rect style="stroke:#000;stroke-width:1.5" width="812" height="677.334" x="11" y="465.961" fill="#FFF" filter="url(#f1ripw5coh8idk)"/><path fill="none" d="M94,465.9609 L94,475.3672 L84,485.3672 L11,485.3672" style="stroke:#000;stroke-width:1.5"/><text x="14" y="479.949" class="text" textLength="73">write action</text><path d="M418,495.3672 L418,521.0586 L398,525.0586 L418,529.0586 L418,554.75 A0,0 0 0 0 418,554.75 L813,554.75 A0,0 0 0 0 813,554.75 L813,505.3672 L803,495.3672 L418,495.3672 A0,0 0 0 0 418,495.3672" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M803,495.3672 L803,505.3672 L813,505.3672 L803,495.3672" class="note"/><text x="424" y="513.438" class="text" textLength="217">If you incorrectly specify project for</text><text x="644" y="513.902" class="code" textLength="151">MessageBus.connect()</text><text x="795" y="513.438" class="text" textLength="3">,</text><text x="424" y="529.844" class="text" textLength="214">it will be disconnected on this step.</text><text x="424" y="546.332" class="text" textLength="88">Do not specify</text><text x="515" y="546.797" class="code" textLength="120">parentDisposable</text><text x="638" y="546.332" class="text" textLength="92">unless needed.</text><rect width="377" height="36.406" x="21" y="506.856" class="process" filter="url(#f1ripw5coh8idk)"/><text x="31" y="529.844" class="text" textLength="357">Dispose everything that uses Project as parent disposable</text><rect width="296" height="52.813" x="61.5" y="574.75" class="process" filter="url(#f1ripw5coh8idk)"/><text x="78" y="597.738" class="text" textLength="263">Dispose Project Message Bus Connections</text><text x="71.5" y="614.144" class="text" textLength="276">without explicitly specified parent disposable</text><path d="M378.5,637.5625 L378.5,671.416 L358.5,675.416 L378.5,679.416 L378.5,713.2695 A0,0 0 0 0 378.5,713.2695 L790.5,713.2695 A0,0 0 0 0 790.5,713.2695 L790.5,647.5625 L780.5,637.5625 L378.5,637.5625 A0,0 0 0 0 378.5,637.5625" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M780.5,637.5625 L780.5,647.5625 L790.5,647.5625 L780.5,637.5625" class="note"/><text x="384.5" y="655.551" class="text" textLength="294">Getting services and publishing to message bus</text><text x="384.5" y="671.957" class="text" textLength="162">is prohibited from now on.</text><text x="384.5" y="688.91" class="code" textLength="125">Project.isDisposed</text><text x="512.5" y="688.445" class="text" textLength="45">returns</text><text x="560.5" y="688.91" class="code" textLength="28">true</text><text x="591.5" y="688.445" class="text" textLength="184">(not changed in a read action,</text><text x="384.5" y="704.852" class="text" textLength="232">because state is set in a write action).</text><rect width="298" height="36.488" x="60.5" y="657.172" class="process" filter="url(#f1ripw5coh8idk)"/><text x="70.5" y="680.242" class="text" textLength="119">Set Project State to</text><text x="192.5" y="680.707" class="code" textLength="156">DISPOSE_IN_PROGRESS</text><path d="M403,738.2695 L403,747.4727 L383,751.4727 L403,755.4727 L403,764.6758 A0,0 0 0 0 403,764.6758 L761,764.6758 A0,0 0 0 0 761,764.6758 L761,748.2695 L751,738.2695 L403,738.2695 A0,0 0 0 0 403,738.2695" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M751,738.2695 L751,748.2695 L761,748.2695 L751,738.2695" class="note"/><text x="409" y="756.258" class="text" textLength="337">Connecting to message bus is prohibited from now on.</text><rect width="347" height="36.406" x="36" y="733.269" class="process" filter="url(#f1ripw5coh8idk)"/><text x="46" y="756.258" class="text" textLength="327">Dispose Project Message Bus Connection Disposable</text><path d="M351,786.4316 L351,803.8789 L331,807.8789 L351,811.8789 L351,829.3262 A0,0 0 0 0 351,829.3262 L664,829.3262 A0,0 0 0 0 664,829.3262 L664,796.4316 L654,786.4316 L351,786.4316 A0,0 0 0 0 351,786.4316" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M654,786.4316 L654,796.4316 L664,796.4316 L654,786.4316" class="note"/><text x="357" y="804.502" class="text" textLength="55">Result of</text><text x="415" y="804.967" class="code" textLength="234">ProjectManager.getOpenProjects()</text><text x="357" y="820.908" class="text" textLength="173">is valid only in a read action.</text><rect width="243" height="36.406" x="88" y="789.676" class="process" filter="url(#f1ripw5coh8idk)"/><text x="98" y="812.664" class="text" textLength="223">Remove Project from List of Opened</text><rect width="206" height="52.977" x="106.5" y="849.326" class="process" filter="url(#f1ripw5coh8idk)"/><text x="130" y="872.396" class="text" textLength="23">Fire</text><text x="156" y="872.861" class="code" textLength="95">projectClosed</text><text x="254" y="872.396" class="text" textLength="35">Event</text><text x="116.5" y="889.35" class="code" textLength="186">(l=ProjectManagerListener)</text><rect width="209" height="36.488" x="105" y="922.303" class="process" filter="url(#f1ripw5coh8idk)"/><text x="115" y="945.373" class="text" textLength="119">Set Project State to</text><text x="237" y="945.838" class="code" textLength="67">DISPOSED</text><path d="M346,975.5879 L346,992.9941 L326,996.9941 L346,1000.9941 L346,1018.4004 A0,0 0 0 0 346,1018.4004 L591,1018.4004 A0,0 0 0 0 591,1018.4004 L591,985.5879 L581,975.5879 L346,975.5879 A0,0 0 0 0 346,975.5879" class="note" filter="url(#f1ripw5coh8idk)"/><path d="M581,975.5879 L581,985.5879 L591,985.5879 L581,975.5879" class="note"/><text x="352" y="993.576" class="text" textLength="170">First created, last disposed.</text><text x="352" y="1009.982" class="text" textLength="224">Children are disposed before parent.</text><rect width="233" height="36.406" x="93" y="978.791" class="process" filter="url(#f1ripw5coh8idk)"/><text x="103" y="1001.779" class="text" textLength="213">Dispose Services and Components</text><rect width="155" height="36.406" x="132" y="1038.4" class="process" filter="url(#f1ripw5coh8idk)"/><text x="142" y="1061.389" class="text" textLength="135">Dispose Message Bus</text><rect width="289" height="36.488" x="65" y="1094.807" class="process" filter="url(#f1ripw5coh8idk)" rx="12.5" ry="12.5"/><text x="75" y="1117.877" class="text" textLength="119">Set Project State to</text><text x="197" y="1118.342" class="code" textLength="147">DISPOSE_COMPLETED</text><rect width="117" height="36.406" x="843" y="402.984" class="process" filter="url(#f1ripw5coh8idk)" rx="12.5" ry="12.5"/><text x="853" y="425.973" class="text" textLength="97">Close Cancelled</text><rect width="117" height="36.406" x="1013" y="183.195" class="process" filter="url(#f1ripw5coh8idk)" rx="12.5" ry="12.5"/><text x="1023" y="206.184" class="text" textLength="97">Close Cancelled</text><line style="stroke:#383838;stroke-width:1.5" x1="813.5" x2="813.5" y1="47.406" y2="67.406"/><polygon fill="#383838" points="809.5 57.406 813.5 67.406 817.5 57.406 813.5 61.406" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="555.5" x2="555.5" y1="219.602" y2="239.602"/><polygon fill="#383838" points="551.5 229.602 555.5 239.602 559.5 229.602 555.5 233.602" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="555.5" x2="555.5" y1="292.578" y2="312.578"/><polygon fill="#383838" points="551.5 302.578 555.5 312.578 559.5 302.578 555.5 306.578" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="543.262" y2="574.75"/><polygon fill="#383838" points="205.5 564.75 209.5 574.75 213.5 564.75 209.5 568.75" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="627.563" y2="657.172"/><polygon fill="#383838" points="205.5 647.172 209.5 657.172 213.5 647.172 209.5 651.172" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="693.66" y2="733.269"/><polygon fill="#383838" points="205.5 723.269 209.5 733.269 213.5 723.269 209.5 727.269" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="769.676" y2="789.676"/><polygon fill="#383838" points="205.5 779.676 209.5 789.676 213.5 779.676 209.5 783.676" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="826.082" y2="849.326"/><polygon fill="#383838" points="205.5 839.326 209.5 849.326 213.5 839.326 209.5 843.326" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="902.303" y2="922.303"/><polygon fill="#383838" points="205.5 912.303 209.5 922.303 213.5 912.303 209.5 916.303" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="958.791" y2="978.791"/><polygon fill="#383838" points="205.5 968.791 209.5 978.791 213.5 968.791 209.5 972.791" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="1015.197" y2="1038.4"/><polygon fill="#383838" points="205.5 1028.4 209.5 1038.4 213.5 1028.4 209.5 1032.4" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="1074.807" y2="1094.807"/><polygon fill="#383838" points="205.5 1084.807 209.5 1094.807 213.5 1084.807 209.5 1088.807" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="455.961" y2="506.856"/><polygon fill="#383838" points="205.5 496.856 209.5 506.856 213.5 496.856 209.5 500.856" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="478" x2="209.5" y1="380.984" y2="380.984"/><line style="stroke:#383838;stroke-width:1.5" x1="209.5" x2="209.5" y1="380.984" y2="402.984"/><polygon fill="#383838" points="205.5 392.984 209.5 402.984 213.5 392.984 209.5 396.984" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="633" x2="901.5" y1="380.984" y2="380.984"/><line style="stroke:#383838;stroke-width:1.5" x1="901.5" x2="901.5" y1="380.984" y2="402.984"/><polygon fill="#383838" points="897.5 392.984 901.5 402.984 905.5 392.984 901.5 396.984" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="555.5" x2="555.5" y1="348.984" y2="368.984"/><polygon fill="#383838" points="551.5 358.984 555.5 368.984 559.5 358.984 555.5 362.984" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="707" x2="555.5" y1="156.748" y2="156.748"/><line style="stroke:#383838;stroke-width:1.5" x1="555.5" x2="555.5" y1="156.748" y2="183.195"/><polygon fill="#383838" points="551.5 173.195 555.5 183.195 559.5 173.195 555.5 177.195" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="920" x2="1071.5" y1="156.748" y2="156.748"/><line style="stroke:#383838;stroke-width:1.5" x1="1071.5" x2="1071.5" y1="156.748" y2="183.195"/><polygon fill="#383838" points="1067.5 173.195 1071.5 183.195 1075.5 173.195 1071.5 177.195" style="stroke:#383838;stroke-width:1"/><line style="stroke:#383838;stroke-width:1.5" x1="813.5" x2="813.5" y1="120.301" y2="140.301"/><polygon fill="#383838" points="809.5 130.301 813.5 140.301 817.5 130.301 813.5 134.301" style="stroke:#383838;stroke-width:1"/></g></svg>